"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[61373],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>d});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),l=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=l(e.components);return a.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),h=l(n),d=r,m=h["".concat(c,".").concat(d)]||h[d]||p[d]||i;return n?a.createElement(m,o(o({ref:t},u),{},{components:n})):a.createElement(m,o({ref:t},u))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=h;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var l=2;l<i;l++)o[l]=n[l];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},35059:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var a=n(87462),r=(n(67294),n(3905));const i={id:"security-overview",title:"Pulsar security overview",sidebar_label:"Overview"},o=void 0,s={unversionedId:"security-overview",id:"security-overview",title:"Pulsar security overview",description:"As the central message bus for a business, Apache Pulsar is frequently used for storing mission-critical data. Therefore, enabling security features in Pulsar is crucial. This chapter describes the main security controls that Pulsar uses to help protect your data.",source:"@site/docs/security-overview.md",sourceDirName:".",slug:"/security-overview",permalink:"/docs/next/security-overview",draft:!1,editUrl:"https://github.com/apache/pulsar/edit/master/site2/docs/security-overview.md",tags:[],version:"current",frontMatter:{id:"security-overview",title:"Pulsar security overview",sidebar_label:"Overview"},sidebar:"docsSidebar",previous:{title:"Isolate bookies",permalink:"/docs/next/administration-isolation-bookie"},next:{title:"End-to-End Encryption",permalink:"/docs/next/security-encryption"}},c={},l=[{value:"Encryption",id:"encryption",level:2},{value:"Authentication",id:"authentication",level:2},{value:"Authorization",id:"authorization",level:2}],u={toc:l};function p(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"As the central message bus for a business, Apache Pulsar is frequently used for storing mission-critical data. Therefore, enabling security features in Pulsar is crucial. This chapter describes the main security controls that Pulsar uses to help protect your data."),(0,r.kt)("p",null,"Pulsar security is based on the following core pillars."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#encryption"},"Encryption")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#authentication"},"Authentication")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#authorization"},"Authorization"))),(0,r.kt)("p",null,"By default, Pulsar configures no encryption, authentication, or authorization. Any clients can communicate to Pulsar via plain text service URLs. So you must ensure that Pulsar accessing via these plain text service URLs is restricted to trusted clients only. In such cases, you can use network segmentation and/or authorization ACLs to restrict access to trusted IPs. If you use neither, the state of the cluster is wide open and anyone can access the cluster."),(0,r.kt)("p",null,"Apache Pulsar uses an ",(0,r.kt)("a",{parentName:"p",href:"#authentication"},"Authentication Provider")," or an ",(0,r.kt)("a",{parentName:"p",href:"/docs/next/security-extending#proxybroker-authentication-plugin"},"Authentication Provider Chain")," to establish the identity of a client and then assign a ",(0,r.kt)("em",{parentName:"p"},"role token")," (a string like ",(0,r.kt)("inlineCode",{parentName:"p"},"admin")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"app1"),") to that client. This role token can represent a single client or multiple clients and is then used for ",(0,r.kt)("a",{parentName:"p",href:"/docs/next/security-authorization"},"Authorization")," to determine what the client is authorized to do. You can use roles to control permission for clients to produce or consume from certain topics, administer the configuration for tenants, and so on."),(0,r.kt)("h2",{id:"encryption"},"Encryption"),(0,r.kt)("p",null,"Encryption ensures that if an attacker gets access to your data, the attacker cannot read the data without also having access to the encryption keys. Encryption provides an important mechanism for protecting your data in-transit to meet your security requirements for cryptographic algorithms and key management. "),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"What's next?")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"To configure end-to-end encryption, see ",(0,r.kt)("a",{parentName:"li",href:"/docs/next/security-encryption"},"End-to-end encryption")," for more details."),(0,r.kt)("li",{parentName:"ul"},"To configure transport layer encryption, see ",(0,r.kt)("a",{parentName:"li",href:"/docs/next/security-tls-transport"},"TLS encryption")," for more details.")),(0,r.kt)("h2",{id:"authentication"},"Authentication"),(0,r.kt)("p",null,"Authentication is the process of verifying the identity of clients. In Pulsar, the authentication provider is responsible for properly identifying clients and associating them with role tokens. Note that if you only enable authentication, an authenticated role token can access all resources in the cluster. "),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"How it works in Pulsar")),(0,r.kt)("p",null,"Pulsar provides a pluggable authentication framework, and Pulsar brokers/proxies use this mechanism to authenticate clients."),(0,r.kt)("p",null,"The way how each client passes its authentication data to brokers varies depending on the protocols it uses. Brokers validate the authentication credentials when a connection is established and check whether the authentication data is expired."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"When using HTTP/HTTPS protocol for cluster management, each client passes the authentication data based on the HTTP/HTTPS request header, and brokers check the data upon request."),(0,r.kt)("li",{parentName:"ul"},"When using ",(0,r.kt)("a",{parentName:"li",href:"/docs/next/developing-binary-protocol"},"Pulsar protocol")," for productions/consumptions, each client passes the authentication data by sending the ",(0,r.kt)("inlineCode",{parentName:"li"},"CommandConnect")," command when connecting to brokers. Brokers cache the data and periodically check whether the data has expired and learn whether the client supports authentication refreshing. By default, the ",(0,r.kt)("inlineCode",{parentName:"li"},"authenticationRefreshCheckSeconds")," is set to 60s.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"If a client supports authentication refreshing and the credential is expired, brokers send the ",(0,r.kt)("inlineCode",{parentName:"li"},"CommandAuthChallenge")," command to exchange the authentication data with the client. If the next check finds that the previous authentication exchange has not been returned, brokers disconnect the client."),(0,r.kt)("li",{parentName:"ul"},"If a client does not support authentication refreshing and the credential is expired, brokers disconnect the client.")))),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"When you use proxies between clients and brokers, brokers only authenticate proxies (known as ",(0,r.kt)("strong",{parentName:"p"},"self-authentication"),") by default. To forward the authentication data from clients to brokers for client authentication (known as ",(0,r.kt)("strong",{parentName:"p"},"original authentication"),"), you need to:"),(0,r.kt)("ol",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ol"},"Set ",(0,r.kt)("inlineCode",{parentName:"li"},"forwardAuthorizationCredentials")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"true")," in the ",(0,r.kt)("inlineCode",{parentName:"li"},"conf/proxy.conf")," file."),(0,r.kt)("li",{parentName:"ol"},"Set ",(0,r.kt)("inlineCode",{parentName:"li"},"authenticateOriginalAuthData")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"true")," in the ",(0,r.kt)("inlineCode",{parentName:"li"},"conf/broker.conf")," file, which ensures that brokers recheck the client authentication."))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"What's next?")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"To configure built-in authentication plugins, read:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/docs/next/security-tls-authentication"},"TLS authentication")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/docs/next/security-athenz"},"Athenz authentication")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/docs/next/security-kerberos"},"Kerberos authentication")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/docs/next/security-jwt"},"JSON Web Token (JWT) authentication")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/docs/next/security-oauth2"},"OAuth 2.0 authentication")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/docs/next/security-basic-auth"},"HTTP basic authentication")))),(0,r.kt)("li",{parentName:"ul"},"To customize an authentication plugin, read ",(0,r.kt)("a",{parentName:"li",href:"security-extending"},"extended authentication"),".")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Starting from 2.11.0, ",(0,r.kt)("a",{parentName:"p",href:"/docs/next/security-tls-authentication"},"TLS authentication")," includes ",(0,r.kt)("a",{parentName:"p",href:"/docs/next/security-tls-transport"},"TLS encryption")," by default. If you configure TLS authentication first, then TLS encryption automatically applies; if you configure TLS encryption first, you can select any one of the above authentication providers.")),(0,r.kt)("h2",{id:"authorization"},"Authorization"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"/docs/next/security-authorization"},"Authorization")," is the process of giving permissions to clients and determining what clients can do."),(0,r.kt)("p",null,"The role tokens with the most permissions are the superusers who can create and delete tenants, along with full access to all tenant resources. When a superuser creates a tenant, that tenant is assigned an admin role token. A client with the admin role token can then create, modify and destroy namespaces, and grant and revoke permissions to other role tokens on those namespaces."))}p.isMDXComponent=!0}}]);