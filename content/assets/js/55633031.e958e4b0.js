"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[21551],{3905:(e,r,t)=>{t.d(r,{Zo:()=>d,kt:()=>m});var n=t(67294);function i(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function a(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){i(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function s(e,r){if(null==e)return{};var t,n,i=function(e,r){if(null==e)return{};var t,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||(i[t]=e[t]);return i}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var c=n.createContext({}),l=function(e){var r=n.useContext(c),t=r;return e&&(t="function"==typeof e?e(r):a(a({},r),e)),t},d=function(e){var r=l(e.components);return n.createElement(c.Provider,{value:r},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},f=n.forwardRef((function(e,r){var t=e.components,i=e.mdxType,o=e.originalType,c=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=l(t),f=i,m=p["".concat(c,".").concat(f)]||p[f]||u[f]||o;return t?n.createElement(m,a(a({ref:r},d),{},{components:t})):n.createElement(m,a({ref:r},d))}));function m(e,r){var t=arguments,i=r&&r.mdxType;if("string"==typeof e||i){var o=t.length,a=new Array(o);a[0]=f;var s={};for(var c in r)hasOwnProperty.call(r,c)&&(s[c]=r[c]);s.originalType=e,s[p]="string"==typeof e?e:i,a[1]=s;for(var l=2;l<o;l++)a[l]=t[l];return n.createElement.apply(null,a)}return n.createElement.apply(null,t)}f.displayName="MDXCreateElement"},93841:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var n=t(87462),i=(t(67294),t(3905));const o={id:"pulsar-2.10.3",title:"Apache Pulsar 2.10.3",sidebar_label:"Apache Pulsar 2.10.3"},a=void 0,s={unversionedId:"versioned/pulsar-2.10.3",id:"versioned/pulsar-2.10.3",title:"Apache Pulsar 2.10.3",description:"2023-1-4",source:"@site/release-notes/versioned/pulsar-2.10.3.md",sourceDirName:"versioned",slug:"/versioned/pulsar-2.10.3",permalink:"/release-notes/versioned/pulsar-2.10.3",draft:!1,editUrl:"https://github.com/apache/pulsar-site/edit/main/release-notes/versioned/pulsar-2.10.3.md",tags:[],version:"current",frontMatter:{id:"pulsar-2.10.3",title:"Apache Pulsar 2.10.3",sidebar_label:"Apache Pulsar 2.10.3"}},c={},l=[{value:"2023-1-4",id:"2023-1-4",level:4},{value:"Broker",id:"broker",level:3},{value:"Transaction",id:"transaction",level:3},{value:"Pulsar IO and Pulsar Functions",id:"pulsar-io-and-pulsar-functions",level:3},{value:"Tiered Storage",id:"tiered-storage",level:3},{value:"Pulsar SQL",id:"pulsar-sql",level:3},{value:"Pulsar Proxy",id:"pulsar-proxy",level:3},{value:"CLI/Admin",id:"cliadmin",level:3},{value:"Security",id:"security",level:3},{value:"Dependency &amp; Library updates",id:"dependency--library-updates",level:3},{value:"CI &amp; Test",id:"ci--test",level:3},{value:"Others",id:"others",level:3}],d={toc:l};function p(e){let{components:r,...t}=e;return(0,i.kt)("wrapper",(0,n.Z)({},d,t,{components:r,mdxType:"MDXLayout"}),(0,i.kt)("h4",{id:"2023-1-4"},"2023-1-4"),(0,i.kt)("h3",{id:"broker"},"Broker"),(0,i.kt)("p",null,"[improve][broker]"," Omit making a copy of CommandAck when there are no broker interceptors ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/pulsar/pull/18997"},"#18997"),"\n","[fix][broker]"," Copy proto command fields into final variables in ServerCnx ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/pulsar/pull/18987"},"#18987"),"\n","[improve][broker]","Add a cache eviction policy\uff1aEvicting cache data by the slowest markDeletedPosition ","[#14985][fix]","[broker]"," Fix broker cache eviction of entries read by active cursors #17273\n","[enh][broker]"," Add metrics for entry cache insertion, eviction #17248\n","[cleanup][broker]"," Extracted interface for EntryCacheManager #15933\n","[improve][broker]"," Support dynamic update cache config #13679\n","[improve][broker]"," refactor ManagedLedger cacheEvictionTask implement #14488\n","[improve][broker]"," Add logs for why namespace bundle been split (#19003)\n","[fix][broker]"," Fix deadlock in PendingAckHandleImpl (#18989)\n","[fix][broker]"," Branch-2.10 Avoid endless blocking call. (#18914)\n","[fix][broker]","[functions-worker]"," Ensure prometheus metrics are grouped by type (#8407, #13865) #15558\n","[fix][broker]","Update interceptor handler exception (#18940)\n","[fix][broker]"," Fix incorrect bundle split count metric (#17970)\n","[fix][broker]"," Avoid OOM not trigger PulsarByteBufAllocator outOfMemoryListener when use ByteBufAllocator.DEFAULT.heapBuffer in PrometheusMetricsGeneratorUtils (#18747)\n","[improve][broker]"," Make Consumer#equals more effective (#18662)\n","[fix][broker]"," In the trimDeletedEntries method, release the removed entry (#18305)\n","[improve][broker]"," Remove locallyAcquiredLock when removeOwnership (#18197)\n","[improve][broker]"," Avoid unnecessary creation of BitSetRecyclable objects #17998\n","[fix][broker]"," add return for PersistentMessageExpiryMonitor#findEntryFailed #17816\n","[fix][ml]"," Persist correct markDeletePosition to prevent message loss (#18237)\n","[improve][broker]"," Support setting forceDeleteTenantAllowed dynamically (#18192)\nMake BookieId work with PulsarRegistrationDriver (second take) #17922\n","[fix][broker]"," Extract additional servlets to the default directory by\u2026 (#17477)\n","[improve][broker]","Improve PersistentMessageExpiryMonitor expire speed when ledger not existed (#17842)\n","[fix][broker]","Fix mutex never released when trimming (#17911)\n","[fix][broker]"," Fix if dynamicConfig item in ZK do not exist in broker cause NPE. #17705\n","[fix][broker]"," Fix system service namespace create internal event topic. (#17867)\n","[bugfix]"," Prevent Automatic Topic Creation during namespace deletion #17609\n","[fix][broker]","Cache invalidation due to concurrent access (#18076)\n","[fix][broker]","add test case for deleting namespace fail when has partitioned system topic (#17338)\nSkip creating a subscription replication snapshot if no messages have been published after the topic gets activated on a broker #16618\n","[fix][broker]"," Fix uncompleted future when get the topic policies of  a deleted topic (#18824)\n","[fix][broker]"," Fix delete system topic clean topic policy (#18823)\n","[improve][broker]","[PIP-149]","Make getList async #16221\n","[fix][flaky-test]","ManagedCursorMetricsTest.testManagedCursorMetrics #16878\n","[improve][broker]"," System topic writer/reader connection not counted (#18603)\n","[improve][broker]"," System topic writer/reader connection not counted. (#18369)\n","[fix][broker]","unify time unit at dropping the backlog on a topic #17957","[fix][broker]","unify time unit at dropping the backlog on a topic #17957\n","[improve][broker]"," Support setting ForceDeleteNamespaceAllowed dynamically #18181\n","[fix][broker]"," Fix ",(0,i.kt)("inlineCode",{parentName:"p"},"getPositionAfterN")," infinite loop. (#17971)\n","[fix][broker]"," Update the log print content of createSubscriptions (#18024)\n","[Broker]"," Make PersistentTopicsBase#internalGetPartitionedMetadata async #14153\n","[fix][broker]"," Fix duplicated schemas creation #18701\n","[improve][broker]"," Using ",(0,i.kt)("inlineCode",{parentName:"p"},"handle")," instead of ",(0,i.kt)("inlineCode",{parentName:"p"},"handleAsync")," to avoid using common pool thread (#17403)\n","[fix][broker]"," Fix dispatch duplicated messages with ",(0,i.kt)("inlineCode",{parentName:"p"},"Exclusive")," mode. (#17237)\n","[fix][broker]"," Fix the order of resource close in the InMemoryDelayedDeliveryTracker (#18000)\n","[improve][broker]"," reduce code duplication to avoid endless wait ",(0,i.kt)("inlineCode",{parentName:"p"},"CompletableFuture"),"  (#14853)\n","[improve][ML]"," Print log when delete empty ledger. (#17859)\n","[improve]"," clean the empty topicAuthenticationMap in zk when revoke permission (#16815)\n","[fix][broker]"," fix can not revoke permission after update topic partition (#17393)\n","[fix][broker]"," Fix Npe thrown by splitBundle (#17370)\n","[fix][broker]"," Fix executeWithRetry result is null (#17694)\n","[fix][broker]"," Fix SystemTopicBasedTopicPoliciesService NPE issue (#17602)\n","[fix][broker]"," Fix broker cache eviction of entries read by active cursors #17273\n","[fix][broker]"," Fix namespace can not be deleted by force (#18686)\n","[fix][broker]"," Create replicated subscriptions for new partitions when needed (#18659)\n","[fix][broker]"," DnsResolverUtil.TTL should be greater than zero (#18565)\n","[fix][broker]"," Correctly set byte and message out totals per subscription (#18451)\n","[fix][broker]"," fix delete_when_subscriptions_caught_up doesn't work while have active consumers (#18320)\n","[improve][broker]","consumer backlog eviction policy should not reset read position for consumer (#18037)\n","[fix][broker]"," Fix NPE when ResourceGroupService execute scheduled task. #17840\n","[fix][storage]"," Autorecovery default reppDnsResolverClass to ZkBookieRackAffinityMapping (#15640)\n","[broker]"," Fixed delayed delivery after read operation error (#18098)\n","[fix][broker]"," Fix issue where leader broker information isn't available after 10 minutes (#17401)\n","[fix][broker]"," Make full async call in PulsarAuthorizationProvider (#18050)"),(0,i.kt)("h3",{id:"transaction"},"Transaction"),(0,i.kt)("p",null,"[fix][tx]"," Transaction buffer recover blocked by readNext #18833\n","[fix][txn]"," transaction pending ack store future not completely problem (#18943)\n","[fix][txn]"," Fix PendingAckHandleImpl when ",(0,i.kt)("inlineCode",{parentName:"p"},"pendingAckStoreProvider.checkInitializedBefore")," failed (#18859)\n","[improve][txn]"," Add getState in transaction for client API (#17423)\n","[improve][txn]"," Implementation of Delayed Transaction Messages (#17548)"),(0,i.kt)("h3",{id:"pulsar-io-and-pulsar-functions"},"Pulsar IO and Pulsar Functions"),(0,i.kt)("p",null," ","[fix][io]"," Only bundle kafka schema registry client (#18931)\n","[fix][fn]"," Typo in method name (#18844)\n","[fix][function]"," Fix invalid metric type ",(0,i.kt)("inlineCode",{parentName:"p"},"gauge ")," (#18129)\n","[fix][fn]"," fix function failed to start if no ",(0,i.kt)("inlineCode",{parentName:"p"},"typeClassName")," provided in ",(0,i.kt)("inlineCode",{parentName:"p"},"FunctionDetails")," (#18111)"),(0,i.kt)("h3",{id:"tiered-storage"},"Tiered Storage"),(0,i.kt)("p",null,"[fix][offload]"," Fix numerical overflow bug while reading data from tiered storage (#18595)\n","[fix][offload]"," Fix memory leak while Offloading ledgers (#18500)"),(0,i.kt)("h3",{id:"pulsar-sql"},"Pulsar SQL"),(0,i.kt)("p",null,"[fix][sql]"," Fix message without schema issue. (#18745)"),(0,i.kt)("h3",{id:"pulsar-proxy"},"Pulsar Proxy"),(0,i.kt)("h3",{id:"cliadmin"},"CLI/Admin"),(0,i.kt)("p",null,"[fix][cli]"," Fix CLI client produce don't able to use multiple -m send multiple messages (#18238)\n","[fix][cli]"," Check numMessages after incrementing counter #17826\n","[improve][admin]"," Fix NPE in admin-CLI topic stats command (#18326)\n","[improve][admin]"," add topic name and sub name for NotFound error message (#15606)\nPIP-105: new API to get subscription properties #16095\n","[fix][admin]"," returns 4xx error when pulsar-worker-service is disabled and trying to access it (#17901)\nPulsar Admin: grab contextual stacktrace for sync methods (#14620)\n","[fix][admin]"," Fix NPE when get OffloadThreshold on namespace (#18061)"),(0,i.kt)("h3",{id:"security"},"Security"),(0,i.kt)("p",null," ","[fix][sec]"," Upgrade scala-library to get rid of CVE-2022-36944 (#18021)\n","[Improve][Auth]","Update authentication failed metrics report (#17787)\n","[fix][sec]"," Upgrade jackson-databind to 2.13.4.2 to get rid of CVE-2022-42003 (#18394)\n","[fix][sec]"," Upgrade protobuf to 3.19.6 to get rid of CVE-2022-3171 (#18086)\n","[fix][sec]"," File tiered storage: upgrade jettison to get rid of CVE-2022-40149 (#18022)\n","[fix][sec]"," Upgrade JacksonXML to 2.13.4 (#18020)"),(0,i.kt)("h3",{id:"dependency--library-updates"},"Dependency & Library updates"),(0,i.kt)("p",null,"Bump jackson version from 2.13.2 to 2.13.3 #16508\nRemove invalid Netty system property which never was valid for Netty 4.1.x (#13563)\n","[improve][misc]"," Upgrade Netty to 4.1.86.Final and Netty Tcnative to 2.0.54.Final (#18599)\n","[improve][build]"," Remove versions that are handled by netty-bom (#18629)"),(0,i.kt)("h3",{id:"ci--test"},"CI & Test"),(0,i.kt)("p",null," ","[improve][test]"," force initialize field to avoid polluted by mocks (#17022)\n","[fix][flaky-test]","ManagedCursorMetricsTest.testManagedCursorMetrics (#16878)\n","[improve][test]"," remove WhiteBox on MockZooKeeper #17579\n","[improve][test]"," try remove whitebox on MockZooKeeper (#17579)\n","[improve][test]"," Add test case for system topic schema not compatible bug. (#17992)\n","[fix][flaky-test]","BatchMessageWithBatchIndexLevelTest.testBatchMessageAck (#17436)\n","[fix][test]","The pulsarMessageOverhead in 2.10 is different (#18704)\n","[improve][test]"," Add subscribing regex topic test for ",(0,i.kt)("inlineCode",{parentName:"p"},"delete_when_subscriptions_caught_up"),". (#18368)"),(0,i.kt)("h3",{id:"others"},"Others"),(0,i.kt)("p",null," ","[fix][metrics]","wrong metrics text generated when label_cluster specified #17704\n","[fix][meta]"," fix getChildren in MemoryMetadataStore and EtcdMetadataStore (#18172)\n","[improve][schema]"," Change update schema auth from tenant to produce (#18074)\n","[fix][schema]","ledger handle leak when update schema (#17283)\n","[fix][metrics]"," fixed ProxyStats to use common.stats.JvmMetrics (#15692)\n","[refactor][java]"," Improve docs and code quality about KeyValueSchema usages (#17256)\nAllow to configure and disable the size of lookahead for detecting fixed delays in messages #17907\n","[refactor][java]"," Unify the acknowledge process for batch and non-batch message IDs #17833\n","[fix][common]"," Fix parsing partitionedKey with Base64 encode issue. (#17687)\n","[fix][schema]"," Fix cherry-pick issue from #18283 (#18555)\n","[fix][monitor]"," fix metrics string encoding (#18138)"))}p.isMDXComponent=!0}}]);